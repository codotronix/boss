"use strict";(self.webpackChunkboss=self.webpackChunkboss||[]).push([[213],{50:function(e,n,i){i.r(n);var r=i(166),a=i.n(r),t=i(250),o=i(413),s=i(885),c=i(434),l="Dock_root__3Ro3G",u="Dock_inner__hNqIr",d="Dock_scrollable_holder__syAwl",f=i(733),p="DockIcon_root__yRpG+",m="DockIcon_ico__-A3EI",h=i(982),v=i(572),I=i(829),g="app_display_type_window",_={appsviewer:{appId:"appsviewer",name:"Apps",iconClass:"fa-solid fa-cubes-stacked",docked:!0,displayType:g,allowedInstances:1,keywords:["apps","all apps"]},folders:{appId:"folders",name:"Folders",iconClass:"fa-regular fa-folder-open",docked:!0,displayType:g,keywords:["finder","files","folders","explorer"]},settings:{appId:"settings",name:"Settings",iconClass:"fa-solid fa-gear",docked:!0,allowedInstances:1},welcomeapp:{appId:"welcomeapp",name:"Welcome",iconClass:"fa-solid fa-face-smile",displayType:g},bcalc:{appId:"bcalc",name:"B-Calc",iconClass:"fa-solid fa-calculator",displayType:g,keywords:["bcalc","calc","calculator","math"]},terminal:{appId:"terminal",name:"Terminal",iconClass:"fa-solid fa-terminal",docked:!0,displayType:g,keywords:["terminal","cmd","command line","command-line","dos","emulator","shell"]},timer:{appId:"timer",name:"Timer",iconClass:"fa-solid fa-stopwatch-20",displayType:g},bin:{appId:"bin",name:"Bin",iconClass:"fa-solid fa-trash",docked:!0,displayType:g},bnotes:{appId:"bnotes",name:"B-Notes",iconClass:"fa-solid fa-file-lines",displayType:g},bchat:{appId:"bchat",name:"B-Chat",iconClass:"fa-solid fa-comments",displayType:g},calendars:{appId:"calendars",name:"Calendar",iconClass:"fa-regular fa-calendar-days",displayType:g}},w={DEFAULT:"default_window",MAXIMIZED:"maxized_window",MINIMIZED:"minimized_window"},x=1,y=(0,I.oM)({name:"runtime",initialState:{1:{appId:"RUNTIME",runtimeId:1,crucial:!0}},reducers:{runApp:function(e,n){var i=n.payload,r=i.appId,a=i.args,t=Object.values(e).filter((function(e){return e.appId===r})).length,s=_[r],c=s.allowedInstances;if(0===t||!c||c>t){var l=++x,u={appId:r,runtimeId:l,args:a,zIndex:S(e)+1};return s.displayType===g&&(u.winSize=w.DEFAULT),(0,o.Z)((0,o.Z)({},e),{},(0,v.Z)({},l,u))}if(1===c){for(var d=null,f=0,p=Object.values(e);f<p.length;f++){var m=p[f];if(m.appId===r){d=m;break}}d&&d.winSize===w.MINIMIZED&&(d.winSize=w.MAXIMIZED)}return e},terminateApp:function(e,n){var i=n.payload;if(e[i]&&!e[i].crucial){var r=(0,o.Z)({},e);return delete r[i],r}return e},mizeApp:function(e,n){console.log("mizeApp",n);var i=n.payload,r=i.runtimeId,a=i.winSize,t=e[r],s=_[t.appId];if(s.displayType===g){if(Object.values(w).includes(a)){var c=(0,o.Z)((0,o.Z)({},t),{},{winSize:a});return(0,o.Z)((0,o.Z)({},e),{},(0,v.Z)({},r,c))}}else console.log("The display type of this app is ",s.displayType);return e},raiseWindow:function(e,n){var i=n.payload;i in e&&(e[i].zIndex=S(e)+1)}}}),Z=y.actions,b=Z.runApp,j=Z.terminateApp,D=Z.mizeApp,M=Z.raiseWindow,N=y.reducer;function S(e){return Math.max.apply(Math,(0,h.Z)(Object.values(e).map((function(e){return e.zIndex||0}))))}var A=function(){var e=(0,c.I0)(),n=(0,c.v9)((function(e){return e.procs}));return{run:function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return e(b({appId:n,args:r}))},terminate:function(n){return e(j(n))},mize:function(n,i){return e(D({runtimeId:n,winSize:i}))},raiseWindow:function(n){return e(M(n))},getMaxZIndex:function(){return S(n)}}},C=i(184),F=function(e){var n=e.appId,i=e.name,r=e.iconClass,a=A();return(0,C.jsx)("div",{className:p,onClick:function(){return a.run(n)},title:i,children:(0,C.jsx)("i",{className:(0,f.Z)(r,m)})})},k="MinimizedAppsViewer_root__tchYL",E="MinimizedAppsViewer_minimizeCount__J9StM",z="MinimizedAppsList_root__c1PLn",T="MinimizedAppsList_inner__eFQML",W="MinimizedAppsList_appName__1yts9",L="MinimizedAppsList_closeIco__FRP7q",O=function(e){var n=e.visible,i=e.setVisible,r=e.minimizedApps,a=A();return(0,C.jsx)("div",{className:(0,f.Z)(z,!n&&"hidden"),children:(0,C.jsxs)("ul",{className:T,children:[(!r||0===r.length)&&(0,C.jsx)("li",{className:"p-10",children:"No minimized apps"}),r&&r.map((function(e){return(0,C.jsxs)("li",{children:[(0,C.jsx)("span",{className:W,onClick:function(){return n=e.runtimeId,i(!1),a.mize(n,w.MAXIMIZED),void a.raiseWindow(n);var n},children:_[e.appId].name}),(0,C.jsx)("i",{className:(0,f.Z)("fa-solid fa-xmark",L),title:"Close App",onClick:function(){return n=e.runtimeId,void a.terminate(n);var n}})]},e.runtimeId)}))]})})},R=function(e){var n=(0,r.useState)(!1),i=(0,s.Z)(n,2),a=i[0],t=i[1],o=(0,c.v9)((function(e){return e.procs})),l=Object.values(o).filter((function(e){return e.winSize===w.MINIMIZED}));return(0,C.jsxs)("div",{className:k,children:[(0,C.jsx)(O,{visible:a,setVisible:t,minimizedApps:l}),(0,C.jsxs)("div",{className:p,children:[l.length>0&&(0,C.jsx)("span",{className:E,children:l.length}),(0,C.jsx)("i",{className:(0,f.Z)("fa-solid fa-bars",m),onClick:function(){return t(!a)}})]})]})},X=function(e){var n=(0,r.useState)(1),i=(0,s.Z)(n,2),a=i[0],t=i[1],f=(0,c.v9)((function(e){return e.apps})),p=Object.values(f).filter((function(e){return e.docked})),m=A();return(0,C.jsx)("div",{className:l,style:{zIndex:a},onClick:function(){t(m.getMaxZIndex()+1)},children:(0,C.jsxs)("div",{className:u,children:[(0,C.jsx)("div",{className:d,children:p&&p.map((function(e){return(0,C.jsx)(F,(0,o.Z)({},e),e.appId)}))}),(0,C.jsx)(R,{})]})})},V="WelcomeApp_root__e1Te1",B={root:"WinFrame_root__7I0Xk",bar:"WinFrame_bar__kl8w-",namebar:"WinFrame_namebar__bhez0",btns:"WinFrame_btns__-rDlS",dragIco:"WinFrame_dragIco__Dr0BW",menubar:"WinFrame_menubar__F+ov1",menu:"WinFrame_menu__XVTtb",menuName:"WinFrame_menuName__wE-S3",subMenu:"WinFrame_subMenu__lhnTZ",visible:"WinFrame_visible__D0Kcn",body:"WinFrame_body__RPv4g",loadingComp:"WinFrame_loadingComp__ZRBu7",repositionHandle:"WinFrame_repositionHandle__HI2Yn"};var U=function(e){var n=(0,r.useState)({leftDiff:0,topDiff:0}),i=(0,s.Z)(n,2),a=i[0],t=i[1],o=(0,r.useRef)(null);return{posDiff:a,onDragStart:function(n,i,r){if(o.current={left:n,top:i},e){var a=n-parseInt(e.style.left);r.dataTransfer.setDragImage(e,a,0)}},onDrag:function(e,n){if(0!==e||0!==n){if(o.current){var i=e-o.current.left,r=n-o.current.top;t({leftDiff:i,topDiff:r})}o.current={left:e,top:n}}},onDragEnd:function(e,n){o.current=null}}},H=function(e){var n=e.menu,i=e.handleMenuCommand,a=(0,r.useState)(""),t=(0,s.Z)(a,2),o=t[0],c=t[1];return(0,C.jsx)("div",{className:(0,f.Z)(B.bar,B.menubar),children:n&&Object.keys(n).map((function(e){return(0,C.jsxs)("div",{className:(0,f.Z)(B.menu,o===e&&B.visible),children:[(0,C.jsx)("span",{className:B.menuName,onClick:function(){var n;c(o===(n=e)?"":n)},children:e}),(0,C.jsx)("ul",{className:B.subMenu,children:n[e].map((function(e){return(0,C.jsx)("li",{onClick:function(){return i(e.command)},children:e.name},e.command)}))})]},e)}))})},P="new_window",Y="close_window",G={File:[{name:"New Window",command:P},{name:"Close Window",command:Y}],Menu2:[{command:"sub1",name:"Sub Menu 1"},{command:"sub2",name:"Sub Menu 2"},{command:"sub3",name:"Sub Menu 3"},{command:"sub4",name:"Sub Menu 4"}]},q=function(e){var n=e.appName;return(0,C.jsxs)("div",{className:B.loadingComp,children:[n||"The App"," is Loading ..."]})},J=function(e){var n=e.appProps,i=e.AppComponent,a=n.runtimeInfo,t=_[a.appId].name,c=A(),l=(0,r.useRef)(w.DEFAULT===w.MAXIMIZED?function(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight}()}:{top:10+Math.floor(200*Math.random()),left:10+Math.floor(100*Math.random()),width:Math.max(300,Math.floor(.7*window.innerWidth)),height:350}),u=(0,r.useState)(l.current),d=(0,s.Z)(u,2),p=d[0],m=d[1],h=(0,r.useRef)(),v=(0,r.useState)(G),I=(0,s.Z)(v,2),g=I[0],x=I[1],y=(0,r.useState)(""),Z=(0,s.Z)(y,2),b=Z[0],j=Z[1],D=U(h.current),M=D.posDiff,N=D.onDragStart,S=D.onDrag,F=D.onDragEnd,k=U(),E=k.posDiff,z=k.onDragStart,T=k.onDrag,W=k.onDragEnd;(0,r.useEffect)((function(){var e=(0,o.Z)({},l.current);a.winSize===w.MAXIMIZED&&(e={top:0,left:0,width:window.innerWidth,height:window.innerHeight}),a.winSize===w.MINIMIZED&&(e=(0,o.Z)((0,o.Z)({},e),{},{top:window.innerHeight-100,left:200,transform:"scale(0)"})),m(e)}),[a.winSize]),(0,r.useEffect)((function(){m((function(e){return(0,o.Z)((0,o.Z)({},e),{},{left:e.left+M.leftDiff,top:e.top+M.topDiff})}))}),[M]),(0,r.useEffect)((function(){m((function(e){return(0,o.Z)((0,o.Z)({},e),{},{width:e.width+E.leftDiff,height:e.height+E.topDiff})}))}),[E]);var L=function(){return c.raiseWindow(a.runtimeId)};return(0,C.jsxs)("div",{className:(0,f.Z)(B.root,a.winSize===w.MINIMIZED&&B.minimized,a.winSize===w.DEFAULT&&B.defaultSized),style:(0,o.Z)((0,o.Z)({},p),{},{zIndex:a.zIndex}),onClick:L,ref:h,children:[(0,C.jsxs)("div",{className:(0,f.Z)(B.bar,B.namebar),draggable:"true",onDrag:function(e){return S(e.pageX,e.pageY)},onDragStart:function(e){return function(e,n,i){N(e,n,i),L()}(e.pageX,e.pageY,e)},onDragEnd:function(e){return F(e.pageX,e.pageY)},children:[(0,C.jsx)("div",{children:t||"Application"}),(0,C.jsxs)("div",{className:B.btns,children:[a.winSize!==w.MAXIMIZED&&(0,C.jsx)("i",{className:"fa-regular fa-square",onClick:function(){return c.mize(a.runtimeId,w.MAXIMIZED)}}),(a.winSize===w.MAXIMIZED||a.winSize===w.MINIMIZED)&&(0,C.jsx)("i",{className:"fa-solid fa-down-left-and-up-right-to-center",onClick:function(){return c.mize(a.runtimeId,w.DEFAULT)}}),(0,C.jsx)("i",{className:"fa-solid fa-window-minimize",onClick:function(){return c.mize(a.runtimeId,w.MINIMIZED)}}),(0,C.jsx)("i",{className:"fa-solid fa-xmark",onClick:function(){c.terminate(a.runtimeId)}})]})]}),(0,C.jsx)(H,{menu:g,handleMenuCommand:function(e){switch(e){case P:window.setTimeout((function(){c.run(a.appId)}),0);break;case Y:c.terminate(a.runtimeId);break;default:j(e)}}}),(0,C.jsx)("div",{style:{height:p.height-50},className:B.body,children:(0,C.jsx)(r.Suspense,{fallback:(0,C.jsx)(q,{appName:t}),children:(0,C.jsx)(i,(0,o.Z)((0,o.Z)({},n),{},{configMenu:function(e){e.hideMenu&&x(null)},menuCommand:b}))})}),(0,C.jsx)("i",{className:(0,f.Z)("fa-solid fa-arrow-up-right-dots",B.repositionHandle),draggable:"true",onDrag:function(e){return T(e.pageX,e.pageY)},onDragStart:function(e){return z(e.pageX,e.pageY)},onDragEnd:function(e){return W(e.pageX,e.pageY)}})]})};var K=function(e){return function(n){return(0,C.jsx)(J,{appProps:n,AppComponent:e})}},Q=K((function(e){return(0,C.jsxs)("div",{className:V,children:[(0,C.jsx)("i",{className:"fa-solid fa-face-smile"}),(0,C.jsx)("h2",{children:"Welcome to B.O.S.S"}),(0,C.jsxs)("div",{children:[(0,C.jsx)("u",{children:"B"}),"asic ",(0,C.jsx)("u",{children:"OS"})," ",(0,C.jsx)("u",{children:"S"}),"imulation"]})]})})),$=K(a().lazy((function(){return i.e(463).then(i.t.bind(i,55,23))}))),ee="AppsViewerApp_root__sHx-3",ne="AppsViewerApp_inner__DgUUp",ie="AppsViewerApp_app__NuVJU",re="AppsViewerApp_figSlot__YDIVw",ae="AppsViewerApp_appIco__cX9XG",te="AppsViewerApp_appName__t4ByG",oe=K((function(e){var n=e.configMenu,i=e.runtimeInfo,a=(0,r.useState)(Object.values(_).filter((function(e){return e.appId!==i.appId}))),t=(0,s.Z)(a,1)[0],o=A();(0,r.useEffect)((function(){n({hideMenu:!0})}),[n]);return(0,C.jsx)("div",{className:ee,children:(0,C.jsx)("div",{className:ne,children:t.map((function(e){return(0,C.jsxs)("div",{className:(0,f.Z)(ie,"flex-c"),onDoubleClick:function(){return n=e.appId,void window.setTimeout((function(){o.run(n)}),0);var n},children:[(0,C.jsx)("div",{className:(0,f.Z)(re,"flex-c"),children:e.iconClass&&(0,C.jsx)("i",{className:(0,f.Z)(e.iconClass,ae)})}),(0,C.jsx)("span",{className:(0,f.Z)(te,"flex-c"),children:e.name})]},e.appId)}))})})})),se=K((function(e){return(0,C.jsx)("div",{children:"The Timer App - Work in Progress"})})),ce=K((function(e){var n=e.configMenu;return(0,r.useEffect)((function(){n({hideMenu:!0})}),[n]),(0,C.jsx)("div",{children:"Settings App - Under Development"})})),le="TerminalApp_root__hnkgI",ue="TerminalApp_historyTxt__NdHdn",de="TerminalApp_inputArea__6htWV",fe=i(762),pe=i(261),me={FILE:"FILE",FOLDER:"FOLDER"};var he={"/":{id:"/",name:"/",fileType:me.FOLDER,parentId:null,children:[]}},ve=(0,I.oM)({name:"fileSystem",initialState:he,reducers:{create:function(e,n){var i=n.payload;return function(e,n,i,r,a){if(!(i in e)||e[i].fileType!==me.FOLDER)return e;if(e[i].children.map((function(n){return e[n].name})).includes(n))return e;var t=function(e,n,i,r){return{id:(0,pe.Z)(),name:e,parentId:n,fileType:i,owner:r,date_creation:Date.now(),date_modification:Date.now(),children:i===me.FOLDER?[]:null}}(n,i,r,a),s=(0,o.Z)((0,o.Z)({},e),{},(0,v.Z)({},t.id,t));i&&(s[i]=(0,o.Z)((0,o.Z)({},s[i]),{},{children:[].concat((0,h.Z)(s[i].children),[t.id])}));return s}(e,i.name,i.parentId,i.fileType,i.owner)}}}),Ie=ve.actions.create,ge=ve.reducer;var _e=function(){var e=(0,c.v9)((function(e){return e.files})),n=(0,c.I0)(),i=function(i,r,a){return we(e,n,i,r,me.FOLDER,a)};return{createFile:function(i,r,a){return we(e,n,i,r,me.FILE,a)},createDir:i,createFolder:i,getChildrenNames:function(n){return function(e,n){return xe(e,n).map((function(e){return e.name}))}(e,n)},getPathTill:function(n){return function(e,n){var i=[];for(;n in e;)i.push(e[n].name),n=e[n].parentId;return i.reverse().join("/").replace("//","/")}(e,n)},getFileInfo:function(n){return function(e,n){if(n=function(e){for(var n=e[0],i=1;i<e.length;++i)e[i]===e[i-1]&&"/"===e[i]||(n+=e[i]);return n}(n),"/"===n)return e["/"];var i,r=n.split("/").filter((function(e){return e.trim().length>0})),a=xe(e,"/"),t=null,o=(0,fe.Z)(r);try{for(o.s();!(i=o.n()).done;){var s,c=i.value,l=!1,u=(0,fe.Z)(a);try{for(u.s();!(s=u.n()).done;){var d=s.value;if(d.name===c){l=!0,t=d,a=xe(e,d.id);break}}}catch(f){u.e(f)}finally{u.f()}if(!l)return null}}catch(f){o.e(f)}finally{o.f()}return t}(e,n)}}};function we(e,n,i,r,a,t){return r in e&&e[r].fileType===me.FOLDER?e[r].children.map((function(n){return e[n].name})).includes(i)?'File/folder name "'.concat(i,'" already exists'):(n(Ie({name:i,parentId:r,fileType:a,owner:t})),""):"Can not create file/folder in the given location"}function xe(e,n){var i=[];if(""===n)i=Object.values(e).filter((function(e){return e.parentId===n}));else if(n in e){i=(e[n].children||[]).map((function(n){return e[n]}))}return i}function ye(e){var n=function(){var e=_e();return{ls:function(n,i){return[e.getChildrenNames(n.currentFolderId),0]},pwd:n,touch:function(n,i){var r,a="",t=(0,fe.Z)(i);try{for(t.s();!(r=t.n()).done;){var o=r.value,s=e.createFile(o,n.currentFolderId);s&&(a+=s+"\n")}}catch(c){t.e(c)}finally{t.f()}return[a,0]},mkdir:i,md:i,cd:function(i,r){var a=r[0];if(!a)return["",0];"."!==a[0]&&"/"!==a[0]&&(a=n(i)[0]+"/"+a);var t=e.getFileInfo(a);return console.log(t),t&&t.fileType===me.FOLDER?(i.currentFolderId=t.id,console.log(i),["",0]):['"'.concat(a,'" is not a folder to move into')]}};function n(n,i){return[e.getPathTill(n.currentFolderId),0]}function i(n,i){var r,a="",t=(0,fe.Z)(i);try{for(t.s();!(r=t.n()).done;){var o=r.value,s=e.createDir(o,n.currentFolderId);s&&(a+=s+"\n")}}catch(c){t.e(c)}finally{t.f()}return[a,0]}}();return function(i){var r=i.trim().split(/\s+/),a=r[0];console.log(r);var t=(0,o.Z)({},n),c='Sorry could not find the command "<b>'.concat(a,'</b>"'),l=-1;if(a in t){var u=t[a](e,r.slice(1)),d=(0,s.Z)(u,2);c=d[0],l=d[1]}return{msg:c,code:l,ctx:e}}}var Ze=function(e,n){return'<div style="color: '.concat(n,'">').concat(e,"</div>")},be={appsviewer:oe,settings:ce,terminal:K((function(e){var n=(0,r.useState)("$ > "),i=(0,s.Z)(n,2),a=i[0],t=(i[1],(0,r.useState)(Ze("Welcome to the B.O.S.S. terminal","lightyellow"))),o=(0,s.Z)(t,2),c=o[0],l=o[1],u=(0,r.useState)(a),d=(0,s.Z)(u,2),f=d[0],p=d[1],m=(0,r.useState)([]),v=(0,s.Z)(m,2),I=v[0],g=v[1],_=(0,r.useState)(0),w=(0,s.Z)(_,2),x=w[0],y=w[1],Z=(0,r.useRef)(),b=(0,r.useRef)({}),j=ye(b.current);(0,r.useEffect)((function(){var e=Z.current;e.focus(),e.selectionStart=e.selectionEnd=e.value.length}),[]),(0,r.useEffect)((function(){b.current={currentFolderId:"/"}}),[]);return(0,C.jsxs)("div",{className:le,children:[(0,C.jsx)("div",{className:ue,dangerouslySetInnerHTML:{__html:c}}),(0,C.jsx)("textarea",{className:de,value:f,ref:Z,onChange:function(e){var n=e.target.value;n.startsWith(a)&&p(n)},onKeyUp:function(e){var n=e.keyCode;if(13===n){var i=f.substring(a.length).trim();if(0===i.length)return;if("cls"===i||"clear"===i)l("");else{console.log(b.current);var r=j(i,b.current),t=c+Ze(f,"lightgreen")+Ze(r.msg,"lightskyblue");l(t)}if(p(a),i!==I[I.length-1]){var o=[].concat((0,h.Z)(I),[i]);g(o),y(o.length)}}else if(38===n){if(0===I.length)return;var s=x>0?x-1:0;y(s),p(a+I[s])}else if(40===n){if(0===I.length)return;var u=x<I.length-1?x+1:I.length-1;y(u),p(a+I[u])}}})]})})),welcomeapp:Q,bcalc:$,timer:se},je=function(){var e=Object.values((0,c.v9)((function(e){return e.procs})));return(0,C.jsx)("div",{className:"apps_container",children:e.map((function(e){var n=be[e.appId];return n?(0,C.jsx)(n,{runtimeInfo:e},e.runtimeId):null}))})},De=function(){return(0,C.jsxs)("div",{className:"App",children:[(0,C.jsx)(je,{}),(0,C.jsx)(X,{})]})},Me=function(e){e&&e instanceof Function&&i.e(787).then(i.bind(i,787)).then((function(n){var i=n.getCLS,r=n.getFID,a=n.getFCP,t=n.getLCP,o=n.getTTFB;i(e),r(e),a(e),t(e),o(e)}))},Ne=(0,I.oM)({name:"apps",initialState:_,reducers:{}}).reducer,Se=(0,I.xC)({reducer:{apps:Ne,procs:N,files:ge}});t.createRoot(document.getElementById("root")).render((0,C.jsx)(a().StrictMode,{children:(0,C.jsx)(c.zt,{store:Se,children:(0,C.jsx)(De,{})})})),Me()}}]);
//# sourceMappingURL=213.1dd572e2.chunk.js.map