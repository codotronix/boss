"use strict";(self.webpackChunkboss=self.webpackChunkboss||[]).push([[711],{357:function(e,n,i){i.r(n);var a=i(166),r=i.n(a),t=i(250),s=i(413),o=i(885),c=i(434),l="Dock_root__3Ro3G",u="Dock_inner__hNqIr",d="Dock_scrollable_holder__syAwl",p=i(733),m="DockIcon_root__yRpG+",f="DockIcon_ico__-A3EI",h=i(982),_=i(572),I=i(829),g="app_display_type_window",v={appsviewer:{appId:"appsviewer",name:"Apps",iconClass:"fa-solid fa-cubes-stacked",docked:!0,displayType:g,allowedInstances:1,keywords:["apps","all apps"]},folders:{appId:"folders",name:"Folders",iconClass:"fa-regular fa-folder-open",docked:!0,displayType:g,keywords:["finder","files","folders","explorer"]},settings:{appId:"settings",name:"Settings",iconClass:"fa-solid fa-gear",docked:!0,allowedInstances:1},welcomeapp:{appId:"welcomeapp",name:"Welcome",iconClass:"fa-solid fa-face-smile",displayType:g},bcalc:{appId:"bcalc",name:"B-Calc",iconClass:"fa-solid fa-calculator",displayType:g,keywords:["bcalc","calc","calculator","math"]},terminal:{appId:"terminal",name:"Terminal",iconClass:"fa-solid fa-terminal",docked:!0,displayType:g,keywords:["terminal","cmd","command line","command-line","dos","emulator","shell"]},timer:{appId:"timer",name:"Timer",iconClass:"fa-solid fa-stopwatch-20",displayType:g},bin:{appId:"bin",name:"Bin",iconClass:"fa-solid fa-trash",docked:!0,displayType:g},bnotes:{appId:"bnotes",name:"B-Notes",iconClass:"fa-solid fa-file-lines",displayType:g},bchat:{appId:"bchat",name:"B-Chat",iconClass:"fa-solid fa-comments",displayType:g},calendars:{appId:"calendars",name:"Calendar",iconClass:"fa-regular fa-calendar-days",displayType:g}},w={DEFAULT:"default_window",MAXIMIZED:"maxized_window",MINIMIZED:"minimized_window"},x=1,b=(0,I.oM)({name:"runtime",initialState:{1:{appId:"RUNTIME",runtimeId:1,crucial:!0}},reducers:{runApp:function(e,n){var i=n.payload,a=i.appId,r=i.args,t=Object.values(e).filter((function(e){return e.appId===a})).length,o=v[a],c=o.allowedInstances;if(0===t||!c||c>t){var l=++x,u={appId:a,runtimeId:l,args:r,zIndex:S(e)+1};return o.displayType===g&&(u.winSize=w.DEFAULT),(0,s.Z)((0,s.Z)({},e),{},(0,_.Z)({},l,u))}if(1===c){for(var d=null,p=0,m=Object.values(e);p<m.length;p++){var f=m[p];if(f.appId===a){d=f;break}}d&&d.winSize===w.MINIMIZED&&(d.winSize=w.MAXIMIZED)}return e},terminateApp:function(e,n){var i=n.payload;if(e[i]&&!e[i].crucial){var a=(0,s.Z)({},e);return delete a[i],a}return e},mizeApp:function(e,n){console.log("mizeApp",n);var i=n.payload,a=i.runtimeId,r=i.winSize,t=e[a],o=v[t.appId];if(o.displayType===g){if(Object.values(w).includes(r)){var c=(0,s.Z)((0,s.Z)({},t),{},{winSize:r});return(0,s.Z)((0,s.Z)({},e),{},(0,_.Z)({},a,c))}}else console.log("The display type of this app is ",o.displayType);return e},raiseWindow:function(e,n){var i=n.payload;i in e&&(e[i].zIndex=S(e)+1)}}}),j=b.actions,M=j.runApp,Z=j.terminateApp,y=j.mizeApp,N=j.raiseWindow,D=b.reducer;function S(e){return Math.max.apply(Math,(0,h.Z)(Object.values(e).map((function(e){return e.zIndex||0}))))}var A=function(){var e=(0,c.I0)(),n=(0,c.v9)((function(e){return e.procs}));return{run:function(n){for(var i=arguments.length,a=new Array(i>1?i-1:0),r=1;r<i;r++)a[r-1]=arguments[r];return e(M({appId:n,args:a}))},terminate:function(n){return e(Z(n))},mize:function(n,i){return e(y({runtimeId:n,winSize:i}))},raiseWindow:function(n){return e(N(n))},getMaxZIndex:function(){return S(n)}}},C=i(184),z=function(e){var n=e.appId,i=e.name,a=e.iconClass,r=A();return(0,C.jsx)("div",{className:m,onClick:function(){return r.run(n)},title:i,children:(0,C.jsx)("i",{className:(0,p.Z)(a,f)})})},k="MinimizedAppsViewer_root__tchYL",T="MinimizedAppsViewer_minimizeCount__J9StM",E="MinimizedAppsList_root__c1PLn",W="MinimizedAppsList_inner__eFQML",F="MinimizedAppsList_appName__1yts9",X="MinimizedAppsList_closeIco__FRP7q",L=function(e){var n=e.visible,i=e.setVisible,a=e.minimizedApps,r=A();return(0,C.jsx)("div",{className:(0,p.Z)(E,!n&&"hidden"),children:(0,C.jsxs)("ul",{className:W,children:[(!a||0===a.length)&&(0,C.jsx)("li",{className:"p-10",children:"No minimized apps"}),a&&a.map((function(e){return(0,C.jsxs)("li",{children:[(0,C.jsx)("span",{className:F,onClick:function(){return n=e.runtimeId,i(!1),r.mize(n,w.MAXIMIZED),void r.raiseWindow(n);var n},children:v[e.appId].name}),(0,C.jsx)("i",{className:(0,p.Z)("fa-solid fa-xmark",X),title:"Close App",onClick:function(){return n=e.runtimeId,void r.terminate(n);var n}})]},e.runtimeId)}))]})})},V=function(e){var n=(0,a.useState)(!1),i=(0,o.Z)(n,2),r=i[0],t=i[1],s=(0,c.v9)((function(e){return e.procs})),l=Object.values(s).filter((function(e){return e.winSize===w.MINIMIZED}));return(0,C.jsxs)("div",{className:k,children:[(0,C.jsx)(L,{visible:r,setVisible:t,minimizedApps:l}),(0,C.jsxs)("div",{className:m,children:[l.length>0&&(0,C.jsx)("span",{className:T,children:l.length}),(0,C.jsx)("i",{className:(0,p.Z)("fa-solid fa-bars",f),onClick:function(){return t(!r)}})]})]})},B=function(e){var n=(0,a.useState)(1),i=(0,o.Z)(n,2),r=i[0],t=i[1],p=(0,c.v9)((function(e){return e.apps})),m=Object.values(p).filter((function(e){return e.docked})),f=A();return(0,C.jsx)("div",{className:l,style:{zIndex:r},onClick:function(){t(f.getMaxZIndex()+1)},children:(0,C.jsxs)("div",{className:u,children:[(0,C.jsx)("div",{className:d,children:m&&m.map((function(e){return(0,C.jsx)(z,(0,s.Z)({},e),e.appId)}))}),(0,C.jsx)(V,{})]})})},O="WelcomeApp_root__e1Te1",R={root:"WinFrame_root__7I0Xk",bar:"WinFrame_bar__kl8w-",namebar:"WinFrame_namebar__bhez0",btns:"WinFrame_btns__-rDlS",dragIco:"WinFrame_dragIco__Dr0BW",menubar:"WinFrame_menubar__F+ov1",menu:"WinFrame_menu__XVTtb",menuName:"WinFrame_menuName__wE-S3",subMenu:"WinFrame_subMenu__lhnTZ",visible:"WinFrame_visible__D0Kcn",body:"WinFrame_body__RPv4g",loadingComp:"WinFrame_loadingComp__ZRBu7",repositionHandle:"WinFrame_repositionHandle__HI2Yn"};var U=function(e){var n=(0,a.useState)({leftDiff:0,topDiff:0}),i=(0,o.Z)(n,2),r=i[0],t=i[1],s=(0,a.useRef)(null);return{posDiff:r,onDragStart:function(n,i,a){if(s.current={left:n,top:i},e){var r=n-parseInt(e.style.left);a.dataTransfer.setDragImage(e,r,0)}},onDrag:function(e,n){if(0!==e||0!==n){if(s.current){var i=e-s.current.left,a=n-s.current.top;t({leftDiff:i,topDiff:a})}s.current={left:e,top:n}}},onDragEnd:function(e,n){s.current=null}}},H=function(e){var n=e.menu,i=e.handleMenuCommand,r=(0,a.useState)(""),t=(0,o.Z)(r,2),s=t[0],c=t[1];return(0,C.jsx)("div",{className:(0,p.Z)(R.bar,R.menubar),children:n&&Object.keys(n).map((function(e){return(0,C.jsxs)("div",{className:(0,p.Z)(R.menu,s===e&&R.visible),children:[(0,C.jsx)("span",{className:R.menuName,onClick:function(){var n;c(s===(n=e)?"":n)},children:e}),(0,C.jsx)("ul",{className:R.subMenu,children:n[e].map((function(e){return(0,C.jsx)("li",{onClick:function(){return i(e.command)},children:e.name},e.command)}))})]},e)}))})},Y="new_window",P="close_window",G={File:[{name:"New Window",command:Y},{name:"Close Window",command:P}],Menu2:[{command:"sub1",name:"Sub Menu 1"},{command:"sub2",name:"Sub Menu 2"},{command:"sub3",name:"Sub Menu 3"},{command:"sub4",name:"Sub Menu 4"}]},q=function(e){var n=e.appName;return(0,C.jsxs)("div",{className:R.loadingComp,children:[n||"The App"," is Loading ..."]})},J=function(e){var n=e.appProps,i=e.AppComponent,r=n.runtimeInfo,t=v[r.appId].name,c=A(),l=(0,a.useRef)(w.DEFAULT===w.MAXIMIZED?function(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight}()}:{top:10+Math.floor(200*Math.random()),left:10+Math.floor(100*Math.random()),width:Math.max(300,Math.floor(.7*window.innerWidth)),height:350}),u=(0,a.useState)(l.current),d=(0,o.Z)(u,2),m=d[0],f=d[1],h=(0,a.useRef)(),_=(0,a.useState)(G),I=(0,o.Z)(_,2),g=I[0],x=I[1],b=(0,a.useState)(""),j=(0,o.Z)(b,2),M=j[0],Z=j[1],y=U(h.current),N=y.posDiff,D=y.onDragStart,S=y.onDrag,z=y.onDragEnd,k=U(),T=k.posDiff,E=k.onDragStart,W=k.onDrag,F=k.onDragEnd;(0,a.useEffect)((function(){var e=(0,s.Z)({},l.current);r.winSize===w.MAXIMIZED&&(e={top:0,left:0,width:window.innerWidth,height:window.innerHeight}),r.winSize===w.MINIMIZED&&(e=(0,s.Z)((0,s.Z)({},e),{},{top:window.innerHeight-100,left:200,transform:"scale(0)"})),f(e)}),[r.winSize]),(0,a.useEffect)((function(){f((function(e){return(0,s.Z)((0,s.Z)({},e),{},{left:e.left+N.leftDiff,top:e.top+N.topDiff})}))}),[N]),(0,a.useEffect)((function(){f((function(e){return(0,s.Z)((0,s.Z)({},e),{},{width:e.width+T.leftDiff,height:e.height+T.topDiff})}))}),[T]);var X=function(){return c.raiseWindow(r.runtimeId)};return(0,C.jsxs)("div",{className:(0,p.Z)(R.root,r.winSize===w.MINIMIZED&&R.minimized,r.winSize===w.DEFAULT&&R.defaultSized),style:(0,s.Z)((0,s.Z)({},m),{},{zIndex:r.zIndex}),onClick:X,ref:h,children:[(0,C.jsxs)("div",{className:(0,p.Z)(R.bar,R.namebar),draggable:"true",onDrag:function(e){return S(e.pageX,e.pageY)},onDragStart:function(e){return function(e,n,i){D(e,n,i),X()}(e.pageX,e.pageY,e)},onDragEnd:function(e){return z(e.pageX,e.pageY)},children:[(0,C.jsx)("div",{children:t||"Application"}),(0,C.jsxs)("div",{className:R.btns,children:[r.winSize!==w.MAXIMIZED&&(0,C.jsx)("i",{className:"fa-regular fa-square",onClick:function(){return c.mize(r.runtimeId,w.MAXIMIZED)}}),(r.winSize===w.MAXIMIZED||r.winSize===w.MINIMIZED)&&(0,C.jsx)("i",{className:"fa-solid fa-down-left-and-up-right-to-center",onClick:function(){return c.mize(r.runtimeId,w.DEFAULT)}}),(0,C.jsx)("i",{className:"fa-solid fa-window-minimize",onClick:function(){return c.mize(r.runtimeId,w.MINIMIZED)}}),(0,C.jsx)("i",{className:"fa-solid fa-xmark",onClick:function(){c.terminate(r.runtimeId)}})]})]}),(0,C.jsx)(H,{menu:g,handleMenuCommand:function(e){switch(e){case Y:window.setTimeout((function(){c.run(r.appId)}),0);break;case P:c.terminate(r.runtimeId);break;default:Z(e)}}}),(0,C.jsx)("div",{style:{height:m.height-50},className:R.body,children:(0,C.jsx)(a.Suspense,{fallback:(0,C.jsx)(q,{appName:t}),children:(0,C.jsx)(i,(0,s.Z)((0,s.Z)({},n),{},{configMenu:function(e){e.hideMenu&&x(null)},menuCommand:M}))})}),(0,C.jsx)("i",{className:(0,p.Z)("fa-solid fa-arrow-up-right-dots",R.repositionHandle),draggable:"true",onDrag:function(e){return W(e.pageX,e.pageY)},onDragStart:function(e){return E(e.pageX,e.pageY)},onDragEnd:function(e){return F(e.pageX,e.pageY)}})]})};var K=function(e){return function(n){return(0,C.jsx)(J,{appProps:n,AppComponent:e})}},Q=K((function(e){return(0,C.jsxs)("div",{className:O,children:[(0,C.jsx)("i",{className:"fa-solid fa-face-smile"}),(0,C.jsx)("h2",{children:"Welcome to B.O.S.S"}),(0,C.jsxs)("div",{children:[(0,C.jsx)("u",{children:"B"}),"asic ",(0,C.jsx)("u",{children:"OS"})," ",(0,C.jsx)("u",{children:"S"}),"imulation"]})]})})),$=K(r().lazy((function(){return i.e(463).then(i.t.bind(i,55,23))}))),ee="AppsViewerApp_root__sHx-3",ne="AppsViewerApp_inner__DgUUp",ie="AppsViewerApp_app__NuVJU",ae="AppsViewerApp_figSlot__YDIVw",re="AppsViewerApp_appIco__cX9XG",te="AppsViewerApp_appName__t4ByG",se=K((function(e){var n=e.configMenu,i=e.runtimeInfo,r=(0,a.useState)(Object.values(v).filter((function(e){return e.appId!==i.appId}))),t=(0,o.Z)(r,1)[0],s=A();(0,a.useEffect)((function(){n({hideMenu:!0})}),[n]);return(0,C.jsx)("div",{className:ee,children:(0,C.jsx)("div",{className:ne,children:t.map((function(e){return(0,C.jsxs)("div",{className:(0,p.Z)(ie,"flex-c"),onDoubleClick:function(){return n=e.appId,void window.setTimeout((function(){s.run(n)}),0);var n},children:[(0,C.jsx)("div",{className:(0,p.Z)(ae,"flex-c"),children:e.iconClass&&(0,C.jsx)("i",{className:(0,p.Z)(e.iconClass,re)})}),(0,C.jsx)("span",{className:(0,p.Z)(te,"flex-c"),children:e.name})]},e.appId)}))})})})),oe=K((function(e){return(0,C.jsx)("div",{children:"The Timer App - Work in Progress"})})),ce=K((function(e){var n=e.configMenu;return(0,a.useEffect)((function(){n({hideMenu:!0})}),[n]),(0,C.jsx)("div",{children:"Settings App - Under Development"})})),le="TerminalApp_root__hnkgI",ue="TerminalApp_historyTxt__NdHdn",de="TerminalApp_inputArea__6htWV";var pe=function(e,n){return'<div style="color: '.concat(n,'">').concat(e,"</div>")},me={appsviewer:se,settings:ce,terminal:K((function(e){var n=(0,a.useState)("$ > "),i=(0,o.Z)(n,2),r=i[0],t=(i[1],(0,a.useState)(pe("Welcome to the B.O.S.S. terminal","lightyellow"))),s=(0,o.Z)(t,2),c=s[0],l=s[1],u=(0,a.useState)(r),d=(0,o.Z)(u,2),p=d[0],m=d[1],f=(0,a.useState)([]),_=(0,o.Z)(f,2),I=_[0],g=_[1],v=(0,a.useState)(0),w=(0,o.Z)(v,2),x=w[0],b=w[1],j=(0,a.useRef)();(0,a.useEffect)((function(){var e=j.current;e.focus(),e.selectionStart=e.selectionEnd=e.value.length}),[]);return(0,C.jsxs)("div",{className:le,children:[(0,C.jsx)("div",{className:ue,dangerouslySetInnerHTML:{__html:c}}),(0,C.jsx)("textarea",{className:de,value:p,ref:j,onChange:function(e){var n=e.target.value;n.startsWith(r)&&m(n)},onKeyUp:function(e){var n=e.keyCode;if(13===n){var i=p.substring(r.length).trim();if(0===i.length)return;var a=function(e,n){var i=e.trim().split(/\s+/);return console.log(i),{msg:'Sorry could not find the command "<b>'.concat(i[0],'</b>"'),code:-1,ctx:n}}(i),t=c+pe(p,"lightgreen")+pe(a.msg,"lightskyblue");if(l(t),m(r),i!==I[I.length-1]){var s=[].concat((0,h.Z)(I),[i]);g(s),b(s.length)}}else if(38===n){if(0===I.length)return;var o=x>0?x-1:0;b(o),m(r+I[o])}else if(40===n){if(0===I.length)return;var u=x<I.length-1?x+1:I.length-1;b(u),m(r+I[u])}}})]})})),welcomeapp:Q,bcalc:$,timer:oe},fe=function(){var e=Object.values((0,c.v9)((function(e){return e.procs})));return(0,C.jsx)("div",{className:"apps_container",children:e.map((function(e){var n=me[e.appId];return n?(0,C.jsx)(n,{runtimeInfo:e},e.runtimeId):null}))})},he=function(){return(0,C.jsxs)("div",{className:"App",children:[(0,C.jsx)(fe,{}),(0,C.jsx)(B,{})]})},_e=function(e){e&&e instanceof Function&&i.e(787).then(i.bind(i,787)).then((function(n){var i=n.getCLS,a=n.getFID,r=n.getFCP,t=n.getLCP,s=n.getTTFB;i(e),a(e),r(e),t(e),s(e)}))},Ie=(0,I.oM)({name:"apps",initialState:v,reducers:{}}).reducer,ge=(0,I.xC)({reducer:{apps:Ie,procs:D}});t.createRoot(document.getElementById("root")).render((0,C.jsx)(r().StrictMode,{children:(0,C.jsx)(c.zt,{store:ge,children:(0,C.jsx)(he,{})})})),_e()}}]);
//# sourceMappingURL=711.b4f2d1d9.chunk.js.map