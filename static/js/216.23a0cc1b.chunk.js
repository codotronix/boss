"use strict";(self.webpackChunkboss=self.webpackChunkboss||[]).push([[216],{565:function(n,e,i){i.r(e);var a=i(166),r=i.n(a),t=i(250),s=i(413),o=i(885),c=i(434),l="Dock_root__3Ro3G",d="Dock_inner__hNqIr",u=i(733),p="DockIcon_root__yRpG+",f="DockIcon_ico__-A3EI",m=i(982),h=i(572),I=i(829),g="app_display_type_window",_={launch_pad:{appId:"launch_pad",name:"Launch Pad",iconClass:"fa-solid fa-cubes-stacked",docked:!0,displayType:g},folders:{appId:"folders",name:"Folders",iconClass:"fa-regular fa-folder-open",docked:!0,displayType:g},settings:{appId:"settings",name:"Settings",iconClass:"fa-solid fa-gear",docked:!0},welcomeApp:{appId:"welcomeApp",name:"Welcome App",iconClass:"fa-solid fa-face-smile",docked:!0,displayType:g},b_calc:{appId:"b_calc",name:"B-Calc",iconClass:"fa-solid fa-calculator",docked:!0,displayType:g},bin:{appId:"bin",name:"Bin",iconClass:"fa-solid fa-trash",docked:!0,displayType:g},b_notes:{appId:"b_notes",name:"B-Notes",iconClass:"fa-solid fa-file-lines",displayType:g},b_chat:{appId:"b_chat",name:"B-Chat",iconClass:"fa-solid fa-comments",displayType:g},calendars:{appId:"calendars",name:"Calendar",iconClass:"fa-regular fa-calendar-days",displayType:g}},x={DEFAULT:"default_window",MAXIMIZED:"maxized_window",MINIMIZED:"minimized_window"},v=1,w=(0,I.oM)({name:"runtime",initialState:{1:{appId:"RUNTIME",runtimeId:1,crucial:!0}},reducers:{runApp:function(n,e){var i=e.payload,a=i.appId,r=i.args,t=Object.values(n).filter((function(n){return n.appId===a})).length,o=_[a],c=o.allowedInstances;if(0===t||!c||c>t){var l=++v,d={appId:a,runtimeId:l,args:r,zIndex:z(n)+1};return o.displayType===g&&(d.winSize=x.DEFAULT),(0,s.Z)((0,s.Z)({},n),{},(0,h.Z)({},l,d))}return n},terminateApp:function(n,e){var i=e.payload;if(n[i]&&!n[i].crucial){var a=(0,s.Z)({},n);return delete a[i],a}return n},mizeApp:function(n,e){console.log("mizeApp",e);var i=e.payload,a=i.runtimeId,r=i.winSize,t=n[a],o=_[t.appId];if(o.displayType===g){if(Object.values(x).includes(r)){var c=(0,s.Z)((0,s.Z)({},t),{},{winSize:r});return(0,s.Z)((0,s.Z)({},n),{},(0,h.Z)({},a,c))}}else console.log("The display type of this app is ",o.displayType);return n},raiseWindow:function(n,e){var i=e.payload;i in n&&(n[i].zIndex=z(n)+1)}}}),j=w.actions,D=j.runApp,M=j.terminateApp,Z=j.mizeApp,b=j.raiseWindow,y=w.reducer;function z(n){return Math.max.apply(Math,(0,m.Z)(Object.values(n).map((function(n){return n.zIndex||0}))))}var A=function(){var n=(0,c.I0)(),e=(0,c.v9)((function(n){return n.procs}));return{run:function(e){for(var i=arguments.length,a=new Array(i>1?i-1:0),r=1;r<i;r++)a[r-1]=arguments[r];return n(D({appId:e,args:a}))},terminate:function(e){return n(M(e))},mize:function(e,i){return n(Z({runtimeId:e,winSize:i}))},raiseWindow:function(e){return n(b(e))},getMaxZIndex:function(){return z(e)}}},N=i(184),C=function(n){var e=n.appId,i=n.name,a=n.iconClass,r=A();return(0,N.jsx)("div",{className:p,onClick:function(){return r.run(e)},title:i,children:(0,N.jsx)("i",{className:(0,u.Z)(a,f)})})},S="MinimizedAppsViewer_root__tchYL",k="MinimizedAppsViewer_minimizeCount__J9StM",E="MinimizedAppsList_root__c1PLn",F="MinimizedAppsList_inner__eFQML",T="MinimizedAppsList_appName__1yts9",W="MinimizedAppsList_closeIco__FRP7q",L=function(n){var e=n.visible,i=n.setVisible,a=n.minimizedApps,r=A();return(0,N.jsx)("div",{className:(0,u.Z)(E,!e&&"hidden"),children:(0,N.jsxs)("ul",{className:F,children:[(!a||0===a.length)&&(0,N.jsx)("li",{className:"p-10",children:"No minimized apps"}),a&&a.map((function(n){return(0,N.jsxs)("li",{children:[(0,N.jsx)("span",{className:T,onClick:function(){return e=n.runtimeId,i(!1),r.mize(e,x.MAXIMIZED),void r.raiseWindow(e);var e},children:_[n.appId].name}),(0,N.jsx)("i",{className:(0,u.Z)("fa-solid fa-xmark",W),title:"Close App",onClick:function(){return e=n.runtimeId,void r.terminate(e);var e}})]},n.runtimeId)}))]})})},X=function(n){var e=(0,a.useState)(!1),i=(0,o.Z)(e,2),r=i[0],t=i[1],s=(0,c.v9)((function(n){return n.procs})),l=Object.values(s).filter((function(n){return n.winSize===x.MINIMIZED}));return(0,N.jsxs)("div",{className:S,children:[(0,N.jsx)(L,{visible:r,setVisible:t,minimizedApps:l}),(0,N.jsxs)("div",{className:p,children:[l.length>0&&(0,N.jsx)("span",{className:k,children:l.length}),(0,N.jsx)("i",{className:(0,u.Z)("fa-solid fa-bars",f),onClick:function(){return t(!r)}})]})]})},B=function(n){var e=(0,a.useState)(1),i=(0,o.Z)(e,2),r=i[0],t=i[1],u=(0,c.v9)((function(n){return n.apps})),p=Object.values(u).filter((function(n){return n.docked})),f=A();return(0,N.jsx)("div",{className:l,style:{zIndex:r},onClick:function(){t(f.getMaxZIndex()+1)},children:(0,N.jsxs)("div",{className:d,children:[p&&p.map((function(n){return(0,N.jsx)(C,(0,s.Z)({},n),n.appId)})),(0,N.jsx)(X,{})]})})},O="WelcomeApp_root__e1Te1",P=i(925),R={root:"WinFrame_root__7I0Xk",bar:"WinFrame_bar__kl8w-",namebar:"WinFrame_namebar__bhez0",btns:"WinFrame_btns__-rDlS",dragIco:"WinFrame_dragIco__Dr0BW",menubar:"WinFrame_menubar__F+ov1",menu:"WinFrame_menu__XVTtb",body:"WinFrame_body__RPv4g",loadingComp:"WinFrame_loadingComp__ZRBu7",repositionHandle:"WinFrame_repositionHandle__HI2Yn"},Y=i(763),H=i.n(Y);var U=function(){var n=(0,a.useState)({leftDiff:0,topDiff:0}),e=(0,o.Z)(n,2),i=e[0],r=e[1],t=(0,a.useRef)(null);return{posDiff:i,onDragStart:function(n,e){return t.current={left:n,top:e}},onDrag:H().throttle((function(n,e){if(0!==n||0!==e){if(t.current){var i=n-t.current.left,a=e-t.current.top;r({leftDiff:i,topDiff:a})}t.current={left:n,top:e}}}),0),onDragEnd:function(n,e){t.current=null}}},V=["appProps","AppComponent"],q={File:[],Menu2:[],Menu3:[],Menu4:[],Menu5:[]},G=function(n){var e=n.appName;return(0,N.jsxs)("div",{className:R.loadingComp,children:[e||"The App"," is Loading ..."]})},J=function(n){var e=n.appProps,i=n.AppComponent,r=((0,P.Z)(n,V),e.runtimeInfo),t=_[r.appId].name,c=A(),l=(0,a.useRef)(x.DEFAULT===x.MAXIMIZED?function(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight}()}:{top:10+Math.floor(200*Math.random()),left:10+Math.floor(100*Math.random()),width:Math.max(300,Math.floor(.7*window.innerWidth)),height:350}),d=(0,a.useState)(l.current),p=(0,o.Z)(d,2),f=p[0],m=p[1],h=U(),I=h.posDiff,g=h.onDragStart,v=h.onDrag,w=h.onDragEnd,j=U(),D=j.posDiff,M=j.onDragStart,Z=j.onDrag,b=j.onDragEnd;(0,a.useEffect)((function(){var n=(0,s.Z)({},l.current);r.winSize===x.MAXIMIZED&&(n={top:0,left:0,width:window.innerWidth,height:window.innerHeight}),r.winSize===x.MINIMIZED&&(n=(0,s.Z)((0,s.Z)({},n),{},{top:window.innerHeight-100,left:200,transform:"scale(0)"})),m(n)}),[r.winSize]),(0,a.useEffect)((function(){m((function(n){return(0,s.Z)((0,s.Z)({},n),{},{left:n.left+I.leftDiff,top:n.top+I.topDiff})}))}),[I]),(0,a.useEffect)((function(){m((function(n){return(0,s.Z)((0,s.Z)({},n),{},{width:n.width+D.leftDiff,height:n.height+D.topDiff})}))}),[D]);var y=function(){return c.raiseWindow(r.runtimeId)};return(0,N.jsxs)("div",{className:(0,u.Z)(R.root,r.winSize===x.MINIMIZED&&R.minimized,r.winSize===x.DEFAULT&&R.defaultSized),style:(0,s.Z)((0,s.Z)({},f),{},{zIndex:r.zIndex}),onClick:y,children:[(0,N.jsxs)("div",{className:(0,u.Z)(R.bar,R.namebar),children:[r.winSize===x.DEFAULT&&(0,N.jsx)("i",{className:(0,u.Z)("fa-regular fa-hand",R.dragIco),draggable:"true",onDrag:function(n){return v(n.pageX,n.pageY)},onDragStart:function(n){return e=n.pageX,i=n.pageY,g(e,i),void y();var e,i},onDragEnd:function(n){return w(n.pageX,n.pageY)}}),(0,N.jsx)("div",{children:t||"Application"}),(0,N.jsxs)("div",{className:R.btns,children:[r.winSize!==x.MAXIMIZED&&(0,N.jsx)("i",{className:"fa-regular fa-square",onClick:function(){return c.mize(r.runtimeId,x.MAXIMIZED)}}),(r.winSize===x.MAXIMIZED||r.winSize===x.MINIMIZED)&&(0,N.jsx)("i",{className:"fa-solid fa-down-left-and-up-right-to-center",onClick:function(){return c.mize(r.runtimeId,x.DEFAULT)}}),(0,N.jsx)("i",{className:"fa-solid fa-window-minimize",onClick:function(){return c.mize(r.runtimeId,x.MINIMIZED)}}),(0,N.jsx)("i",{className:"fa-solid fa-xmark",onClick:function(){window.confirm("Do you really want to close ?")&&c.terminate(r.runtimeId)}})]})]}),(0,N.jsx)("div",{className:(0,u.Z)(R.bar,R.menubar),children:Object.keys(q).map((function(n){return(0,N.jsx)("div",{className:R.menu,children:n},n)}))}),(0,N.jsx)("div",{style:{height:f.height-50},className:R.body,children:(0,N.jsx)(a.Suspense,{fallback:(0,N.jsx)(G,{appName:t}),children:(0,N.jsx)(i,(0,s.Z)({},e))})}),(0,N.jsx)("i",{className:(0,u.Z)("fa-solid fa-braille",R.repositionHandle),draggable:"true",onDrag:function(n){return Z(n.pageX,n.pageY)},onDragStart:function(n){return M(n.pageX,n.pageY)},onDragEnd:function(n){return b(n.pageX,n.pageY)}})]})};var Q=function(n){return function(e){return(0,N.jsx)(J,{appProps:e,AppComponent:n})}},K={welcomeApp:Q((function(n){return(0,N.jsxs)("div",{className:O,children:[(0,N.jsx)("i",{className:"fa-solid fa-face-smile"}),(0,N.jsx)("h2",{children:"Welcome to B.O.S.S"}),(0,N.jsxs)("div",{children:[(0,N.jsx)("u",{children:"B"}),"asic ",(0,N.jsx)("u",{children:"OS"})," ",(0,N.jsx)("u",{children:"S"}),"imulation"]})]})})),b_calc:Q(r().lazy((function(){return i.e(463).then(i.t.bind(i,55,23))})))},$=function(){var n=Object.values((0,c.v9)((function(n){return n.procs})));return console.log("runningApps = ",n),(0,N.jsx)("div",{children:n.map((function(n){var e=K[n.appId];return e?(0,N.jsx)(e,{runtimeInfo:n},n.runtimeId):null}))})},nn=function(){return(0,N.jsxs)("div",{className:"App",children:[(0,N.jsx)($,{}),(0,N.jsx)(B,{})]})},en=function(n){n&&n instanceof Function&&i.e(787).then(i.bind(i,787)).then((function(e){var i=e.getCLS,a=e.getFID,r=e.getFCP,t=e.getLCP,s=e.getTTFB;i(n),a(n),r(n),t(n),s(n)}))},an=(0,I.oM)({name:"apps",initialState:_,reducers:{}}).reducer,rn=(0,I.xC)({reducer:{apps:an,procs:y}});t.createRoot(document.getElementById("root")).render((0,N.jsx)(r().StrictMode,{children:(0,N.jsx)(c.zt,{store:rn,children:(0,N.jsx)(nn,{})})})),en()}}]);
//# sourceMappingURL=216.23a0cc1b.chunk.js.map