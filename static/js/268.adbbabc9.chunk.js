"use strict";(self.webpackChunkboss=self.webpackChunkboss||[]).push([[268],{67:function(e,n,t){t.r(n);var r=t(166),i=t.n(r),a=t(250),l=t(413),s=t(885),o=t(434),c="Dock_root__3Ro3G",u="Dock_inner__hNqIr",d="Dock_scrollable_holder__syAwl",p=t(733),f="DockIcon_root__yRpG+",m="DockIcon_ico__-A3EI",h=t(982),_=t(572),v=t(829),g="app_display_type_window",I={appsviewer:{appId:"appsviewer",name:"Apps",iconClass:"fa-solid fa-cubes-stacked",docked:!0,displayType:g,allowedInstances:1,keywords:"apps, all apps"},folders:{appId:"folders",name:"Folders",iconClass:"fa-regular fa-folder-open",docked:!0,displayType:g,keywords:"finder, files, folders, explorer"},settings:{appId:"settings",name:"Settings",iconClass:"fa-solid fa-gear",docked:!0,displayType:g,allowedInstances:1},welcomeapp:{appId:"welcomeapp",name:"Welcome",iconClass:"fa-solid fa-face-smile",displayType:g},bcalc:{appId:"bcalc",name:"B-Calc",iconClass:"fa-solid fa-calculator",displayType:g,keywords:"bcalc, calc, calculator, math"},terminal:{appId:"terminal",name:"Terminal",iconClass:"fa-solid fa-terminal",docked:!0,displayType:g,keywords:"terminal, cmd, command line, command-line, dos, emulator, shell"},timer:{appId:"timer",name:"Timer",iconClass:"fa-solid fa-stopwatch-20",displayType:g},bin:{appId:"bin",name:"Bin",iconClass:"fa-solid fa-trash",docked:!0,displayType:g},bnotes:{appId:"bnotes",name:"B-Notes",iconClass:"fa-solid fa-file-lines",displayType:g},bchat:{appId:"bchat",name:"B-Chat",iconClass:"fa-solid fa-comments",displayType:g},calendars:{appId:"calendars",name:"Calendar",iconClass:"fa-regular fa-calendar-days",displayType:g}},x={DEFAULT:"default_window",MAXIMIZED:"maxized_window",MINIMIZED:"minimized_window"},j=1,w=(0,v.oM)({name:"runtime",initialState:{1:{appId:"RUNTIME",runtimeId:1,crucial:!0}},reducers:{runApp:function(e,n){var t=n.payload,r=t.appId,i=t.args,a=Object.values(e).filter((function(e){return e.appId===r})).length,s=I[r];if(!s)return i&&"object"===typeof i[0]&&i[0].ctx&&(i[0].ctx.error="Invalid App ID"),e;var o=s.allowedInstances;if(0===a||!o||o>a){var c=++j,u={appId:r,runtimeId:c,args:i,zIndex:D(e)+1};return s.displayType===g&&(u.winSize=x.DEFAULT),(0,l.Z)((0,l.Z)({},e),{},(0,_.Z)({},c,u))}if(1===o){for(var d=null,p=0,f=Object.values(e);p<f.length;p++){var m=f[p];if(m.appId===r){d=m;break}}d&&d.winSize===x.MINIMIZED&&(d.winSize=x.MAXIMIZED)}return e},terminateApp:function(e,n){var t=n.payload;if(e[t]&&!e[t].crucial){var r=(0,l.Z)({},e);return delete r[t],r}return e},mizeApp:function(e,n){var t=n.payload,r=t.runtimeId,i=t.winSize,a=e[r];if(I[a.appId].displayType===g&&Object.values(x).includes(i)){var s=(0,l.Z)((0,l.Z)({},a),{},{winSize:i});return(0,l.Z)((0,l.Z)({},e),{},(0,_.Z)({},r,s))}return e},raiseWindow:function(e,n){var t=n.payload;t in e&&(e[t].zIndex=D(e)+1)}}}),y=w.actions,Z=y.runApp,N=y.terminateApp,b=y.mizeApp,M=y.raiseWindow,S=w.reducer;function D(e){return Math.max.apply(Math,(0,h.Z)(Object.values(e).map((function(e){return e.zIndex||0}))))}var F=function(){var e=(0,o.I0)(),n=(0,o.v9)((function(e){return e.procs}));return{run:function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return e(Z({appId:n,args:r}))},terminate:function(n){return e(N(n))},mize:function(n,t){return e(b({runtimeId:n,winSize:t}))},raiseWindow:function(n){return e(M(n))},getMaxZIndex:function(){return D(n)}}},C=t(184),A=function(e){var n=e.appId,t=e.name,r=e.iconClass,i=F();return(0,C.jsx)("button",{type:"button",className:f,onClick:function(){return i.run(n)},title:t,children:(0,C.jsx)("i",{className:(0,p.Z)(r,m)})})},E="MinimizedAppsViewer_root__tchYL",k="MinimizedAppsViewer_minimizeCount__J9StM",T="MinimizedAppsList_root__c1PLn",z="MinimizedAppsList_inner__eFQML",W="MinimizedAppsList_appName__1yts9",L="MinimizedAppsList_closeIco__FRP7q",O=function(e){var n=e.visible,t=e.setVisible,r=e.minimizedApps,i=F();return(0,C.jsx)("div",{className:(0,p.Z)(T,!n&&"hidden"),children:(0,C.jsxs)("ul",{className:z,children:[(!r||0===r.length)&&(0,C.jsx)("li",{className:"p-10",children:"No minimized apps"}),r&&r.map((function(e){return(0,C.jsxs)("li",{children:[(0,C.jsx)("span",{className:W,onClick:function(){return n=e.runtimeId,t(!1),i.mize(n,x.MAXIMIZED),void i.raiseWindow(n);var n},children:I[e.appId].name}),(0,C.jsx)("i",{className:(0,p.Z)("fa-solid fa-xmark",L),title:"Close App",onClick:function(){return n=e.runtimeId,void i.terminate(n);var n}})]},e.runtimeId)}))]})})},B=function(e){var n=(0,r.useState)(!1),t=(0,s.Z)(n,2),i=t[0],a=t[1],l=(0,o.v9)((function(e){return e.procs})),c=Object.values(l).filter((function(e){return e.winSize===x.MINIMIZED}));return(0,C.jsxs)("div",{className:E,children:[(0,C.jsx)(O,{visible:i,setVisible:a,minimizedApps:c}),(0,C.jsxs)("div",{className:f,children:[c.length>0&&(0,C.jsx)("span",{className:k,children:c.length}),(0,C.jsx)("button",{type:"button",className:f,title:"toggle minimized apps",onClick:function(){return a(!i)},children:(0,C.jsx)("i",{className:(0,p.Z)("fa-solid fa-bars",m)})})]})]})},R=function(e){var n=(0,r.useState)(1),t=(0,s.Z)(n,2),i=t[0],a=t[1],p=(0,o.v9)((function(e){return e.apps})),f=Object.values(p).filter((function(e){return e.docked})),m=F();return(0,C.jsx)("div",{id:"thedock",className:c,style:{zIndex:i},onClick:function(){a(m.getMaxZIndex()+1)},children:(0,C.jsxs)("div",{className:u,children:[(0,C.jsx)("div",{className:d,children:f&&f.map((function(e){return(0,C.jsx)(A,(0,l.Z)({},e),e.appId)}))}),(0,C.jsx)(B,{})]})})},X="WelcomeApp_root__e1Te1",P={root:"WinFrame_root__7I0Xk",bar:"WinFrame_bar__kl8w-",namebar:"WinFrame_namebar__bhez0",btns:"WinFrame_btns__-rDlS",dragIco:"WinFrame_dragIco__Dr0BW",mizeBtn:"WinFrame_mizeBtn__YwPof",menubar:"WinFrame_menubar__F+ov1",menu:"WinFrame_menu__XVTtb",menuName:"WinFrame_menuName__wE-S3",subMenu:"WinFrame_subMenu__lhnTZ",visible:"WinFrame_visible__D0Kcn",body:"WinFrame_body__RPv4g",loadingComp:"WinFrame_loadingComp__ZRBu7",repositionHandle:"WinFrame_repositionHandle__HI2Yn"};var H=function(e){var n=(0,r.useState)({leftDiff:0,topDiff:0}),t=(0,s.Z)(n,2),i=t[0],a=t[1],l=(0,r.useRef)(null);return{posDiff:i,onDragStart:function(n,t,r){if(l.current={left:n,top:t},e){var i=n-parseInt(e.style.left);r.dataTransfer.setDragImage(e,i,0)}},onDrag:function(e,n){if(0!==e||0!==n){if(l.current){var t=e-l.current.left,r=n-l.current.top;a({leftDiff:t,topDiff:r})}l.current={left:e,top:n}}},onDragEnd:function(e,n){l.current=null}}},V=function(e){var n=e.menu,t=e.handleMenuCommand,i=(0,r.useState)(""),a=(0,s.Z)(i,2),l=a[0],o=a[1];return(0,C.jsx)("div",{className:(0,p.Z)(P.bar,P.menubar),children:n&&Object.keys(n).map((function(e){return(0,C.jsxs)("div",{className:(0,p.Z)(P.menu,l===e&&P.visible),children:[(0,C.jsx)("span",{className:P.menuName,onClick:function(){var n;o(l===(n=e)?"":n)},children:e}),(0,C.jsx)("ul",{className:P.subMenu,children:Object.values(n[e]).map((function(e){return(0,C.jsx)("li",{onClick:function(){return t(e.command)},children:e.name},e.command)}))})]},e)}))})},U="new_window",Y="close_window",G={File:{1:{name:"New Window",command:U},100:{name:"Close Window",command:Y}}};function Q(e,n){var t=(0,r.useRef)("");(0,r.useEffect)((function(){e!==t.current&&(n(e),t.current=e)}),[e,n])}var J=function(e){var n=e.appName;return(0,C.jsxs)("div",{className:P.loadingComp,children:[n||"The App"," is Loading ..."]})},K=function(e){var n=e.appProps,t=e.AppComponent,i=n.runtimeInfo,a=I[i.appId].name,o=F(),c=(0,r.useRef)(x.DEFAULT===x.MAXIMIZED?function(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight}()}:{top:10+Math.floor(200*Math.random()),left:10+Math.floor(100*Math.random()),width:Math.max(300,Math.floor(.7*window.innerWidth)),height:350}),u=(0,r.useState)(c.current),d=(0,s.Z)(u,2),f=d[0],m=d[1],h=(0,r.useRef)(),_=(0,r.useState)(G),v=(0,s.Z)(_,2),g=v[0],j=v[1],w=(0,r.useState)(""),y=(0,s.Z)(w,2),Z=y[0],N=y[1],b=H(h.current),M=b.posDiff,S=b.onDragStart,D=b.onDrag,A=b.onDragEnd,E=H(),k=E.posDiff,T=E.onDragStart,z=E.onDrag,W=E.onDragEnd;(0,r.useEffect)((function(){var e=(0,l.Z)({},c.current);i.winSize===x.MAXIMIZED&&(e={top:0,left:0,width:window.innerWidth,height:window.innerHeight}),i.winSize===x.MINIMIZED&&(e=(0,l.Z)((0,l.Z)({},e),{},{top:window.innerHeight-100,left:200,transform:"scale(0)"})),m(e)}),[i.winSize]),(0,r.useEffect)((function(){m((function(e){return(0,l.Z)((0,l.Z)({},e),{},{left:e.left+M.leftDiff,top:e.top+M.topDiff})}))}),[M]),(0,r.useEffect)((function(){m((function(e){return(0,l.Z)((0,l.Z)({},e),{},{width:e.width+k.leftDiff,height:e.height+k.topDiff})}))}),[k]);var L=function(){return o.raiseWindow(i.runtimeId)},O=(0,r.useCallback)((function(e){e.hideMenu?j(null):e.replace?j(e.menu):e.menu&&j((function(n){var t=(0,l.Z)({},n);for(var r in e.menu)t[r]=r in t?(0,l.Z)((0,l.Z)({},t[r]),e.menu[r]):e.menu[r];return t}))}),[]);return(0,C.jsxs)("div",{className:(0,p.Z)("WinFrame",P.root,i.winSize===x.MINIMIZED&&P.minimized,i.winSize===x.DEFAULT&&P.defaultSized),style:(0,l.Z)((0,l.Z)({},f),{},{zIndex:i.zIndex}),onClick:L,ref:h,title:a||"Application Window",children:[(0,C.jsxs)("div",{className:(0,p.Z)(P.bar,P.namebar),draggable:"true",onDrag:function(e){return D(e.pageX,e.pageY)},onDragStart:function(e){return function(e,n,t){S(e,n,t),L()}(e.pageX,e.pageY,e)},onDragEnd:function(e){return A(e.pageX,e.pageY)},children:[(0,C.jsx)("div",{children:a||"Application"}),(0,C.jsxs)("div",{className:P.btns,children:[i.winSize!==x.MAXIMIZED&&(0,C.jsx)("button",{type:"button",onClick:function(){return o.mize(i.runtimeId,x.MAXIMIZED)},title:"Maximize",className:P.mizeBtn,children:(0,C.jsx)("i",{className:"fa-regular fa-square"})}),(i.winSize===x.MAXIMIZED||i.winSize===x.MINIMIZED)&&(0,C.jsx)("button",{type:"button",onClick:function(){return o.mize(i.runtimeId,x.DEFAULT)},title:"Un-Maximize",className:P.mizeBtn,children:(0,C.jsx)("i",{className:"fa-solid fa-down-left-and-up-right-to-center"})}),(0,C.jsx)("button",{type:"button",onClick:function(){return o.mize(i.runtimeId,x.MINIMIZED)},title:"Minimize",className:P.mizeBtn,children:(0,C.jsx)("i",{className:"fa-solid fa-window-minimize"})}),(0,C.jsx)("button",{type:"button",onClick:function(){o.terminate(i.runtimeId)},title:"Close",className:P.mizeBtn,children:(0,C.jsx)("i",{className:"fa-solid fa-xmark"})})]})]}),(0,C.jsx)(V,{menu:g,handleMenuCommand:function(e){switch(e){case U:window.setTimeout((function(){o.run(i.appId)}),0);break;case Y:o.terminate(i.runtimeId);break;default:N(e)}setTimeout((function(){N("")}),0)}}),(0,C.jsx)("div",{style:{height:f.height-50},className:P.body,children:(0,C.jsx)(r.Suspense,{fallback:(0,C.jsx)(J,{appName:a}),children:(0,C.jsx)(t,(0,l.Z)((0,l.Z)({},n),{},{configMenu:O,menuCommand:Z,useCMDHandler:Q}))})}),(0,C.jsx)("i",{className:(0,p.Z)("fa-solid fa-arrow-up-right-dots",P.repositionHandle),draggable:"true",onDrag:function(e){return z(e.pageX,e.pageY)},onDragStart:function(e){return T(e.pageX,e.pageY)},onDragEnd:function(e){return W(e.pageX,e.pageY)}})]})};var q=function(e){return function(n){return(0,C.jsx)(K,{appProps:n,AppComponent:e})}},$=q((function(e){return(0,C.jsxs)("div",{className:X,children:[(0,C.jsx)("i",{className:"fa-solid fa-face-smile"}),(0,C.jsx)("h2",{children:"Welcome to B.O.S.S"}),(0,C.jsxs)("div",{children:[(0,C.jsx)("u",{children:"B"}),"asic ",(0,C.jsx)("u",{children:"OS"})," ",(0,C.jsx)("u",{children:"S"}),"imulation"]})]})})),ee=q(i().lazy((function(){return t.e(463).then(t.t.bind(t,55,23))}))),ne="AppsViewerApp_root__sHx-3",te="AppsViewerApp_inner__DgUUp",re="AppsViewerApp_app__NuVJU",ie="AppsViewerApp_figSlot__YDIVw",ae="AppsViewerApp_appIco__cX9XG",le="AppsViewerApp_appName__t4ByG";var se=function(e){var n=e.allItems,t=e.filterKeys,i=e.setFilteredItems,a=function(e,n){var t=(0,r.useState)(e),i=(0,s.Z)(t,2),a=i[0],l=i[1],o=(0,r.useState)(""),c=(0,s.Z)(o,2),u=c[0],d=c[1];return[a,u,function(t){var r=t.target.value;d(r);var i=e.filter((function(e){return n.some((function(n){return e[n]&&e[n].toLowerCase().includes(r.toLowerCase())}))}));l(i)}]}(n,t),l=(0,s.Z)(a,3),o=l[0],c=l[1],u=l[2];return(0,r.useEffect)((function(){i(o)}),[o,i]),(0,C.jsx)("div",{style:{marginBottom:"15px"},children:(0,C.jsx)("input",{type:"text",value:c,onChange:u,placeholder:"Type to filter",style:{width:"100%",padding:"5px"}})})},oe=q((function(e){var n=e.configMenu,t=e.runtimeInfo,i=(0,r.useState)(Object.values(I).filter((function(e){return e.appId!==t.appId}))),a=(0,s.Z)(i,1)[0],l=F(),o=(0,r.useState)(a),c=(0,s.Z)(o,2),u=c[0],d=c[1];(0,r.useEffect)((function(){n({hideMenu:!0})}),[n]);return(0,C.jsxs)("div",{className:ne,children:[(0,C.jsx)(se,{allItems:a,filterKeys:["name","keywords"],setFilteredItems:d}),(0,C.jsx)("div",{className:te,children:u.map((function(e){return(0,C.jsxs)("div",{className:(0,p.Z)(re,"flex-c"),onDoubleClick:function(){return n=e.appId,void window.setTimeout((function(){l.run(n)}),0);var n},title:e.name,children:[(0,C.jsx)("div",{className:(0,p.Z)(ie,"flex-c"),children:e.iconClass&&(0,C.jsx)("i",{className:(0,p.Z)(e.iconClass,ae)})}),(0,C.jsx)("span",{className:(0,p.Z)(le,"flex-c"),children:e.name})]},e.appId)}))})]})})),ce=q((function(e){return(0,C.jsx)("div",{children:"The Timer App - Work in Progress"})})),ue={root:"SettingsApp_root__ZTnGO",container:"SettingsApp_container__D3QmF",left:"SettingsApp_left__x+4BW",btn_panel:"SettingsApp_btn_panel__1MCQI",toggle_btn:"SettingsApp_toggle_btn__vvQZo",left_inner:"SettingsApp_left_inner__p8-GU",selected:"SettingsApp_selected__3ikd2",mid:"SettingsApp_mid__Y5J8y",menu_closed:"SettingsApp_menu_closed__yUNlx"},de={root:"/boss/assets/img/wallpapers/",wallpapers:[{path:"ai-generated-8293344_1280.jpg"},{path:"ai-generated-8327632_1280.jpg"},{path:"beach-front-5819728_1280.jpg"},{path:"dog-8008483_1280.jpg"},{path:"fantasy-3077928_1280.jpg"},{path:"hills-2836301_1280.jpg"},{path:"horse-8008038_1280.jpg"},{path:"interior-design-7413418_1280.jpg"},{path:"pier-1467984_1280.jpg"},{path:"plouzane-1758197.jpg"},{path:"rapeseed-7172836_1280.jpg"},{path:"sci-fi-2992797_1280.jpg"},{path:"sports-car-4815234_1280.jpg"},{path:"superbike-930715_1280.jpg"},{path:"toyota-967011_1280.jpg"},{path:"the-fish-3426368_1280.jpg"},{path:"woman-6882242_1280.jpg"}]},pe="ChangeWallpaper_wallpapers_container__cV6Nm",fe=(0,v.oM)({name:"settings",initialState:{wallpaper:"/boss/assets/img/wallpapers/ai-generated-8293344_1280.jpg"},reducers:{changeWallpaper:function(e,n){e.wallpaper=n.payload}}}),me=fe.actions.changeWallpaper,he=fe.reducer;var _e={menuItems:[{id:1,name:"Change Wallpaper",component:function(){var e=(0,o.I0)();return(0,C.jsx)("div",{children:(0,C.jsx)("ul",{className:pe,children:de.wallpapers.map((function(n){return(0,C.jsx)("li",{children:(0,C.jsx)("img",{src:"".concat(de.root).concat(n.path),alt:"wallpaper",onClick:function(){return function(n){e(me(n))}("".concat(de.root).concat(n.path))}})},n.path)}))})})}},{id:2,name:"Menu Item 2",component:function(){return(0,C.jsx)("div",{children:"Menu Item 2 Placeholer"})}},{id:3,name:"Menu Item 3",component:function(){return(0,C.jsx)("div",{children:"Menu Item 3 Placeholer"})}},{id:4,name:"Menu Item 4",component:function(){return(0,C.jsx)("div",{children:"Menu Item 4 Placeholer"})}},{id:5,name:"Menu Item 5",component:function(){return(0,C.jsx)("div",{children:"Menu Item 5 Placeholer"})}}]},ve=q((function(e){var n=e.configMenu,t=_e.menuItems,i=(0,r.useState)(t[0].id),a=(0,s.Z)(i,2),l=a[0],o=a[1],c=(0,r.useState)(!1),u=(0,s.Z)(c,2),d=u[0],f=u[1],m=(0,r.useState)(t),h=(0,s.Z)(m,2),_=h[0],v=h[1];return(0,r.useEffect)((function(){n({hideMenu:!0})}),[n]),(0,C.jsx)("div",{className:ue.root,children:(0,C.jsxs)("div",{className:(0,p.Z)(ue.container,d&&ue.menu_closed),children:[(0,C.jsx)("div",{className:ue.btn_panel,children:(0,C.jsx)("button",{className:ue.toggle_btn,onClick:function(){return f(!d)},children:(0,C.jsx)("i",{className:"fa-solid fa-arrow-left-long"})})}),(0,C.jsxs)("section",{className:ue.left,children:[(0,C.jsx)(se,{allItems:t,filterKeys:["name"],setFilteredItems:v}),(0,C.jsx)("ul",{className:ue.left_inner,children:_.map((function(e){return(0,C.jsx)("li",{className:(0,p.Z)(l===e.id&&ue.selected),onClick:function(){return o(e.id)},children:e.name},e.id)}))})]}),(0,C.jsx)("section",{className:ue.mid,children:(0,C.jsx)("section",{className:ue.mid_inner,children:t.map((function(e){return(0,C.jsx)("div",{className:(0,p.Z)(l!==e.id&&"hidden"),children:e.component()},e.id)}))})})]})})})),ge="TerminalApp_root__hnkgI",Ie="TerminalApp_historyTxt__NdHdn",xe="TerminalApp_inputArea__6htWV",je=function(e,n){if("apps"===n[0]){var t="\nHere are the available apps:\n\n";return Object.values(I).forEach((function(e){t+="".concat(e.name," (AppId: ").concat(e.appId,")\n")})),[t+="\nType `run &lt;appId&gt;` to run a app\n\n",0]}return[we,0]},we="\nAvailable Commands:\nhelp - Show this help text\nhelp apps - Show available apps\n\nrun &lt;appId&gt; - Run an app\n\nls - List files in the current directory\npwd - Show current directory path\n\ncd &lt;dir&gt; - Change directory\nmd &lt;dir&gt; - Make a new directory\nmkdir - alias for md\ntouch &lt;file&gt; - Create a new file\ncls - Clear the terminal screen\nclear - alias for cls\n\n";var ye=t(762),Ze=t(261),Ne={FILE:"FILE",FOLDER:"FOLDER"};var be={get:function(e){return JSON.parse(localStorage.getItem(e)||null)},set:function(e,n){return localStorage.setItem(e,JSON.stringify(n))},clear:function(e){return localStorage.setItem(e,"")}},Me=function(e){return/^[a-zA-Z0-9-._ ]{1,}$/.test(e)};var Se="BOSS/FILE-TREE",De={"/":{id:"/",name:"/",fileType:Ne.FOLDER,parentId:null,children:["documents","file0"]},documents:{id:"documents",name:"Documents",fileType:Ne.FOLDER,parentId:"/",children:[]},file0:{id:"file0",name:"Hello Boss",fileType:Ne.FILE,parentId:"/",content:"Hello Boss.\nThis is a text file"}},Fe=be.get(Se)||De;be.set(Se,Fe);var Ce=(0,v.oM)({name:"fileSystem",initialState:Fe,reducers:{create:function(e,n){var t=n.payload,r=function(e,n,t,r,i){if(!n.trim()||!Me(n))return e;if(!(t in e)||e[t].fileType!==Ne.FOLDER)return e;if(e[t].children.map((function(n){return e[n].name})).includes(n))return e;var a=function(e,n,t,r){return{id:(0,Ze.Z)(),name:e,parentId:n,fileType:t,owner:r,date_creation:Date.now(),date_modification:Date.now(),children:t===Ne.FOLDER?[]:null}}(n,t,r,i),s=(0,l.Z)((0,l.Z)({},e),{},(0,_.Z)({},a.id,a));t&&(s[t]=(0,l.Z)((0,l.Z)({},s[t]),{},{children:[].concat((0,h.Z)(s[t].children),[a.id])}));return s}(e,t.name,t.parentId,t.fileType,t.owner);return be.set(Se,r),r},rename:function(e,n){var t=n.payload,r=function(e,n,t){if(!t.trim()||!Me(t))return e;if(!(n in e))return e;var r=e[n].parentId;if(e[r].children.map((function(n){return e[n].name})).includes(t))return e;var i=(0,l.Z)((0,l.Z)({},e),{},(0,_.Z)({},n,(0,l.Z)((0,l.Z)({},e[n]),{},{name:t})));return i}(e,t.fileId,t.newName);return be.set(Se,r),r}}}),Ae=Ce.actions,Ee=Ae.create,ke=Ae.rename,Te=Ce.reducer;var ze=function(){var e=(0,o.v9)((function(e){return e.files})),n=(0,o.I0)(),t=function(t,r,i){return We(e,n,t,r,Ne.FOLDER,i)};return{createFile:(0,r.useCallback)((function(t,r,i){return We(e,n,t,r,Ne.FILE,i)}),[n,e]),createDir:t,createFolder:t,getParentId:function(n){return function(e,n){return"/"===n?"/":e[n].parentId}(e,n)},getChildren:function(n){return Oe(e,n)},getChildrenNames:function(n){return function(e,n){return Oe(e,n).map((function(e){return e.name}))}(e,n)},getPathTill:function(n){return function(e,n){var t=[];for(;n in e;)t.push(e[n].name),n=e[n].parentId;return t.reverse().join("/").replace("//","/")}(e,n)},getFileInfo:function(n){return function(e,n){if(n=function(e){for(var n=e[0],t=1;t<e.length;++t)e[t]===e[t-1]&&"/"===e[t]||(n+=e[t]);return n}(n),"/"===n)return e["/"];var t,r=n.split("/").filter((function(e){return e.trim().length>0})),i=Oe(e,"/"),a=null,l=(0,ye.Z)(r);try{for(l.s();!(t=l.n()).done;){var s,o=t.value,c=!1,u=(0,ye.Z)(i);try{for(u.s();!(s=u.n()).done;){var d=s.value;if(d.name===o){c=!0,a=d,i=Oe(e,d.id);break}}}catch(p){u.e(p)}finally{u.f()}if(!c)return null}}catch(p){l.e(p)}finally{l.f()}return a}(e,n)},rename:function(t,r){return Le(e,n,r,t)}}};function We(e,n,t,r,i,a){return t.trim()&&Me(t)?r in e&&e[r].fileType===Ne.FOLDER?e[r].children.map((function(n){return e[n].name})).includes(t)?'File/folder name "'.concat(t,'" already exists'):(n(Ee({name:t,parentId:r,fileType:i,owner:a})),""):"Can not create file/folder in the given location":"Invalid name ".concat(t)}function Le(e,n,t,r){if(!t.trim()||!Me(t))return"Invalid name ".concat(t);if(!(r in e))return"File ID (".concat(r,") not valid");var i=e[r].parentId;return e[i].children.map((function(n){return e[n].name})).includes(t)?'File/folder name "'.concat(t,'" already exists'):(n(ke({fileId:r,newName:t})),"")}function Oe(e,n){var t=[];if(""===n)t=Object.values(e).filter((function(e){return e.parentId===n}));else if(n in e){t=(e[n].children||[]).map((function(n){return e[n]}))}return t}function Be(e){var n=function(){var e=ze();return{ls:function(n,t){return[e.getChildrenNames(n.currentFolderId).join(", "),0]},pwd:n,touch:function(n,t){var r,i="",a=(0,ye.Z)(t);try{for(a.s();!(r=a.n()).done;){var l=r.value,s=e.createFile(l,n.currentFolderId);s&&(i+=s+"\n")}}catch(o){a.e(o)}finally{a.f()}return[i,0]},mkdir:t,md:t,cd:function(t,r){var i=r[0];if(!i)return["",0];"."!==i[0]&&"/"!==i[0]&&(i=n(t)[0]+"/"+i);var a=e.getFileInfo(i);return a&&a.fileType===Ne.FOLDER?(t.currentFolderId=a.id,["",0]):['"'.concat(i,'" is not a folder to move into')]}};function n(n,t){return[e.getPathTill(n.currentFolderId),0]}function t(n,t){var r,i="",a=(0,ye.Z)(t);try{for(a.s();!(r=a.n()).done;){var l=r.value,s=e.createDir(l,n.currentFolderId);s&&(i+=s+"\n")}}catch(o){a.e(o)}finally{a.f()}return[i,0]}}(),t=function(){var e=F().run;return function(n,t){try{return e.apply(void 0,[t[0],{ctx:n}].concat((0,h.Z)(t.slice(1)))),n.error?[n.error,99]:["Attempting to run "+t,0]}catch(r){return["Failed to run the App"]}}}();return{process:function(r){return function(e,n){for(var t=function(e){e=e.trim();var n,t=[],r="",i="",a={},l=!1,s=0,o=(0,ye.Z)(e);try{for(o.s();!(n=o.n()).done;){var c=n.value;if('"'===c)if(l){if((i=i.trim()).length>0){var u="".concat("__QS__").concat(++s);r+=u,a[u]=i,i=""}l=!1}else l=!0;else" "===c?l?i+=c:(r=r.trim()).length>0&&(t.push(r),r=""):l?i+=c:r+=c}}catch(d){o.e(d)}finally{o.f()}return r.length>0&&t.push(r),t.map((function(e){return e.replaceAll(/__QS__[0-9]{1,}/gm,(function(e){return a[e]||e}))}))}(e),r=t[0],i={},a=arguments.length,o=new Array(a>2?a-2:0),c=2;c<a;c++)o[c-2]=arguments[c];for(var u=0,d=o;u<d.length;u++){var p=d[u];i=(0,l.Z)((0,l.Z)({},i),p)}var f='Sorry could not find the command "<b>'.concat(r,'</b>"'),m=-1;if(r in i){var h=i[r](n,t.slice(1)),_=(0,s.Z)(h,2);f=_[0],m=_[1]}return{msg:f,code:m,ctx:n}}(r,e,(0,l.Z)({help:je,run:t},n))}}}var Re=function(e,n){return'<div style="color: '.concat(n,'">').concat(e,"</div>")},Xe=q((function(e){var n=(0,r.useState)("$ > "),t=(0,s.Z)(n,1)[0],i=(0,r.useState)(Re("Welcome to the B.O.S.S. terminal \n(Type `help` to know the available commands)","lightyellow")),a=(0,s.Z)(i,2),l=a[0],o=a[1],c=(0,r.useState)(t),u=(0,s.Z)(c,2),d=u[0],p=u[1],f=(0,r.useState)([]),m=(0,s.Z)(f,2),_=m[0],v=m[1],g=(0,r.useState)(0),I=(0,s.Z)(g,2),x=I[0],j=I[1],w=(0,r.useRef)(),y=(0,r.useRef)({}),Z=Be(y.current).process;(0,r.useEffect)((function(){var e=w.current;e.focus(),e.selectionStart=e.selectionEnd=e.value.length}),[]),(0,r.useEffect)((function(){y.current={currentFolderId:"/"}}),[]);return(0,C.jsxs)("div",{className:ge,children:[(0,C.jsx)("div",{className:Ie,dangerouslySetInnerHTML:{__html:l}}),(0,C.jsx)("textarea",{className:xe,value:d,ref:w,onChange:function(e){var n=e.target.value;n.startsWith(t)&&p(n)},onKeyUp:function(e){var n=e.keyCode;if(13===n){var r=d.substring(t.length).trim();if(0===r.length)return;if("cls"===r||"clear"===r)o("");else{var i=Z(r,y.current),a=l+Re(d,"lightgreen")+Re(i.msg,"white");o(a)}if(p(t),r!==_[_.length-1]){var s=[].concat((0,h.Z)(_),[r]);v(s),j(s.length)}}else if(38===n){if(0===_.length)return;var c=x>0?x-1:0;j(c),p(t+_[c])}else if(40===n){if(0===_.length)return;var u=x<_.length-1?x+1:_.length-1;j(u),p(t+_[u])}}})]})})),Pe="FoldersApp_root__CdN1-",He="FoldersApp_locationBar__lR9vB",Ve="FoldersApp_loc__rXGZe",Ue="FoldersApp_btns__vQOzO",Ye="FoldersApp_inner__lYEzr",Ge="File_file__MMHS5",Qe="File_ffIco__5bYlD",Je="File_fname__-Nx+X",Ke="File_fileIcoBtnHolder__+srav",qe=function(e){var n=e.file,t=e.open,i=e.existingFileNames,a=(0,r.useState)(""),l=(0,s.Z)(a,2),o=l[0],c=l[1],u=ze();(0,r.useEffect)((function(){c(n.name)}),[n.name]);return(0,C.jsxs)("div",{className:Ge,onDoubleClick:function(){return t(n.id,n.fileType)},title:n.name,children:[(0,C.jsx)("div",{className:Ke,children:(0,C.jsx)("button",{type:"button",title:n.name,children:(0,C.jsxs)("span",{className:Qe,children:[n.fileType===Ne.FILE&&(0,C.jsx)("i",{className:"fa-solid fa-file-lines"}),n.fileType===Ne.FOLDER&&(0,C.jsx)("i",{className:"fa-regular fa-folder-open"})]})})}),(0,C.jsx)("input",{className:Je,type:"text",value:o,onChange:function(e){var n=e.target.value;Me(n)&&c(n)},onBlur:function(){i.includes(o)?c(n.name):u.rename(n.id,o)},title:n.name})]})},$e="NEW_FILE",en="NEW_FOLDER",nn=q((function(e){var n=e.configMenu,t=e.menuCommand,i=e.useCMDHandler,a=void 0===i?function(){}:i,l=ze(),o=(0,r.useState)("/"),c=(0,s.Z)(o,2),u=c[0],d=c[1],p=(0,r.useState)(l.getChildren(u)),f=(0,s.Z)(p,2),m=f[0],h=f[1];a(t,(function(e){if(e===$e){var n=Math.floor(999*Math.random());l.createFile("File_".concat(n),u)}else if(e===en){var t=Math.floor(999*Math.random());l.createDir("Folder_".concat(t),u)}v()}));var _=function(e,n){n===Ne.FOLDER&&(d(e),h(l.getChildren(e)))},v=function(){h([]),setTimeout((function(){h(l.getChildren(u))}),0)};return(0,r.useEffect)((function(){n({menu:{File:{2:{name:"New File",command:$e},3:{name:"New Folder",command:en}}}})}),[n]),(0,C.jsxs)("div",{className:Pe,children:[(0,C.jsxs)("div",{className:He,children:[(0,C.jsx)("div",{className:Ve,children:l.getPathTill(u)}),(0,C.jsxs)("div",{className:Ue,children:[(0,C.jsx)("i",{className:"fa-solid fa-rotate-right",onClick:v}),(0,C.jsx)("i",{className:"fa-solid fa-arrow-up",onClick:function(){var e=l.getParentId(u);d(e),h(l.getChildren(e))}})]})]}),(0,C.jsx)("div",{children:(0,C.jsx)("div",{className:Ye,children:m&&m.map((function(e){return(0,C.jsx)(qe,{file:e,open:_,refresh:v,existingFileNames:m.map((function(e){return e.name}))},e.id)}))})})]})})),tn={appsviewer:oe,settings:ve,terminal:Xe,folders:nn,bin:q((function(e){return(0,C.jsx)("div",{children:"The Bin App - Under Development"})})),welcomeapp:$,bcalc:ee,timer:ce},rn=function(){var e=Object.values((0,o.v9)((function(e){return e.procs})));return(0,C.jsx)("div",{className:"apps_container",children:e.map((function(e){var n=tn[e.appId];return n?(0,C.jsx)(n,{runtimeInfo:e},e.runtimeId):null}))})},an=function(){var e=(0,o.v9)((function(e){return e.settings}));return(0,C.jsxs)("div",{className:"App",style:{backgroundImage:"url(".concat(e.wallpaper,")")},children:[(0,C.jsx)(rn,{}),(0,C.jsx)(R,{})]})},ln=function(e){e&&e instanceof Function&&t.e(787).then(t.bind(t,787)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,a=n.getLCP,l=n.getTTFB;t(e),r(e),i(e),a(e),l(e)}))},sn=(0,v.oM)({name:"apps",initialState:I,reducers:{}}).reducer,on=(0,v.xC)({reducer:{apps:sn,procs:S,files:Te,settings:he}});a.createRoot(document.getElementById("root")).render((0,C.jsx)(i().StrictMode,{children:(0,C.jsx)(o.zt,{store:on,children:(0,C.jsx)(an,{})})})),ln()}}]);
//# sourceMappingURL=268.adbbabc9.chunk.js.map